---
pagination_next: null
pagination_prev: null
hide_table_of_contents: true
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

import React from "react";
import Zoom from "react-medium-image-zoom";
import "react-medium-image-zoom/dist/styles.css";

# Holiday Tree

<div style={{ textAlign: "center" }}>
  <table>
    <td>
      <Zoom>
        <img alt="Front" src="/img/catalog/holidaytree-front.png" />
      </Zoom>
    </td>
    <td>
      <Zoom>
        <img alt="Back" src="/img/catalog/holidaytree-back.png" />
      </Zoom>
    </td>
  </table>
  <p>**Smart and Festive Holiday Tree**</p>
</div>

---

<Tabs className="unique-tabs" groupid = "catalog" queryString="show" defaultValue="overview"
  values={[
    {label: 'Overview', value: 'overview'},
    {label: 'Drivers', value: 'drivers'},
    {label: 'Samples', value: 'samples'},
    {label: 'Projects', value: 'projects'},
  ]}>

<TabItem value="overview">
This is arguably the smartest holiday tree in the world! Control the LEDs in [Standalone](../../engine/standalone) mode or connect to a host and control the tree from one of the many available [language](../../language/intro) options.

<Zoom>
  <img alt="Back" src="/img/holiday-trees.png" />
</Zoom>

The 2 boards (A and B) slide into each other, turning this into a 3D-ish module!

<table><td width='50%'>
**Key features**

‚Ä¢ Stand-up Design<br/>
‚Ä¢ 26 Smart LEDs<br/>
‚Ä¢ Buzzer<br/>
‚Ä¢ 61x27mm Overall Dimension<br/>

</td><td width='50%'>
**Resources**

üìÑ[Schematics](pathname:///sch/gdl-mcholidaytree-b.pdf)<br/>
üî©3D STEP files [Part A](pathname:///3d/gdl-mcholidaytree-a-a.step) - [Part B](pathname:///3d/gdl-mcholidaytree-b-a.step)<br/>
‚ñ∂YouTube Videos<br/>
‚ÅÉ [Designing a Festive Circuit](https://youtu.be/CJs9tn5RxjA)<br/>
‚ÅÉ [Manufacturing a Festive Circuit](https://youtu.be/2INa95NzI_o)<br/>
‚ÅÉ [Troubleshooting a Festive Circuit](https://youtu.be/QhicKo7V5Vs)<br/>

</td></table>

</TabItem>

<TabItem value="drivers">

:::important
This very early design has these issues as the core has changed for better support:

- When using DUELink firmware:
  - STAT LED does not work. The `statled()` function will not work.
  - There is no Uplink or Downlink sockets. However, USB Uplink works.
  - Buzzer is connected to pin P25, which has no PWM support in official firmware, `Beep()` works however.
  - The button is not available! It uses a reserved pin.
- When loading your own firmware:
  - The core design has changed a lot.
  - Uplink and Downlink sockets are not available. USB Uplink works.
    :::

| Function                           | Description                                                                                                                   |
| ---------------------------------- | ----------------------------------------------------------------------------------------------------------------------------- |
| `PlayLED(enable)`                  | `PlayLED(1)` will make the LED constantly blink, default. Use `PlayLED(0)` to disable playback and manually control the LEDs. |
| `SetLED(index, color, brightness)` | Set a specific LED to a color, 0 is off. Index start from 1. Brightness max is 31                                             |
| `SetAll(color)`                    | Set all LEDs to a specific color, use 0 to turn off.                                                                          |
| `ShowLed()`                        | Flush                                                                                                                         |
| `RndLed()`                         | Show random color on random leds                                                                                              |
| `Beep(duration)`                   | Play Beep with duration in milliseconds. This is blocking function.                                                           |
| `Init()`                           | Initialize driver                                                                                                             |
| `DVer()`                           | This driver version.                                                                                                          |

<details>
  <summary>The Code!</summary>

Modules ship with this script preloaded. Use [Console](../../console) to reload or modify the drivers. Additionally, some languages, such as [Python](../../language/python), include `DUELink.Engine.Record()` for recording scripts directly from the host.

```py
_n = 26 # num of leds
_a = 4+_n*4+4 # num of led x 4, plus first and last 4 bytes
_i = 0

Dim b1[_a]

fn SetLed(i,c,l)
    i = i - 1

    if (i < 0)
        return
    end

    b1[i*4+4+0] = 0xE0 | l
    b1[i*4+4+1] = ((c >> 0) & 0xFF) # blue
    b1[i*4+4+2] = ((c >> 8) & 0xFF) # green
    b1[i*4+4+3] = ((c >> 16) & 0xFF) # red
fend

fn SetAll(c)
    for i=1 to _n
        SetLED(i, c, 10)
    next
fend

fn ShowLed()
    spiwrs(b1,0)
fend

fn RndLed()
    for i=1 to _n
        r=Rnd(2)*50
        g=Rnd(2)*50
        b=Rnd(2)*50
        SetLED(i, (r << 16) | (g << 8) | (b << 0), 10)
    next

    ShowLed()
fend

fn PlayLed(e)
    if (e = 1)
        SStart("RndLed", 500, 1000)
    else
        SAbort("RndLed")
    end
fend

fn PlayBeep(f,d)
Beep(25,f,d)
fend

fn Init()
    spicfg(0,8000)

    # first 4 bytes need to be 0
    for _i = 0 to 3
        b1[_i] = 0
    next

    # All led off
    for _i = 1 to _n
        SetLed(_i, 0, 0)
    next

    # last 4 bytes need to be 255
    for _i = _a-4 to _a-1
        b1[_i] = 0xFF

    next

     ShowLed()
fend

fn DVer()
    return 0.1
fend

Init()


##### User Code Starts Here #####
PlayBeep(700,200)
AsIo(1) # Enable to accept commands while running
PlayLed(1) # Activate play LED scheduler
while 1
# keep the interpreter running. The scheduler will blink the LEDs
wend
```

</details>
</TabItem>

<TabItem value="samples">

<Tabs
  values={[
    {label: 'Script', value: 'script'},
    {label: 'Python', value: 'py'},
    {label: 'JavaScript', value: 'js'},

]}>

<TabItem value="script">
 Use [Console](../../console) to modify the default driver by adding this sample.
 
```py
# Append this code at the bottom of the script, right after the driver.
# You MUST keep the driver code!!
_x = 0
PlayLED(0) # Take over
SetAll(0) # All off

while 1
\_r = Rnd(50)
\_g = Rnd(50)
\_b = Rnd(50)
\_l = Rnd(31)

SetLED(\_x, \_r<<16|\_g<<8|\_b, \_l)

\_x=\_x+1

if \_x > 26
SetAll(0)
\_x=1
PlayBeep(700,100) # Play beep in 100ms
end

ShowLed()
wend

````
</TabItem>

<TabItem value="py">
```py
import random
duelink.Engine.Run("PlayLED(0)")
duelink.Engine.Run("SetAll(0)")
duelink.Engine.Run("PlayBeep(100)")
x = 1
while True:
   r = int(random.uniform(0, 50))
   g = int(random.uniform(0, 50))
   b = int(random.uniform(0, 50))
   l = int(random.uniform(0, 30))
   c = (r << 16) | (g << 8) | b

   duelink.Engine.Run(f'SetLED({x}, {c}, {l})')

   x = x+1
   if x > 26:
       x = 1
   duelink.Engine.Run("ShowLed()")
````

</TabItem>

<TabItem value="js">
```js
//code
```

</TabItem>

</Tabs>

</TabItem>

<TabItem value='projects'>
Coming Soon!
</TabItem>
</Tabs>

---

<p
  style={{
    backgroundColor: "lightcyan",
    color: "black",
    padding: "0px 0px 0px 30px",
  }}
>
  ## Ordering Info
</p>

| Description  | Part Number         | Price  |
| ------------ | ------------------- | ------ |
| Holiday Tree | GDL-MCHOLIDAYTREE-B | $00.00 |
