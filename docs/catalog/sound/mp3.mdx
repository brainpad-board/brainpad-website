---
pagination_next: null
pagination_prev: null
hide_table_of_contents: true
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import React from "react";
import Zoom from "react-medium-image-zoom";
import "react-medium-image-zoom/dist/styles.css";

# MP3

<div style={{ textAlign: "center" }}>

<Zoom>
<img alt="Front" width="75%" src="/img/catalog/mp3-front.png" />
</Zoom>

  <table>
    <td>
      <Zoom>
        <img alt="Back" src="/img/catalog/mp3-back.png" />
      </Zoom>
    </td>
    <td>
      <Zoom>
        <img alt="Size" src="/img/catalog/mp3-pencil.png" />
      </Zoom>
    </td>
    <td>
      <Zoom>
        <img alt="Front" src="/img/catalog/mp3-front-45.png" />
      </Zoom>
    </td>
    <td>
      <Zoom>
        <img alt="Back" src="/img/catalog/mp3-back-45.png" />
      </Zoom>
    </td>
  </table>
  <p>**MP3 Module**</p>
</div>

---

<Tabs className="unique-tabs" groupid = "catalog" queryString="show" defaultValue="overview"
  values={[
    {label: 'Overview', value: 'overview'},
    {label: 'Drivers', value: 'drivers'},
    {label: 'Samples', value: 'samples'},
    {label: 'Projects', value: 'projects'},
  ]}>

<TabItem value="overview">
Codec Module

<table><td width='50%'>
**Key features**

â€¢ MP3 Decoder<br/>
â€¢ 37x22mm Overall Dimension<br/>

</td><td width='50%'>
**Resources**

ðŸ“„[Schematics](pathname:///sch/gdl-somp3-a.pdf)<br/>
ðŸ”©[3D STEP file](pathname:///3d/gdl-somp3-a.step)<br/>

</td></table>
</TabItem>

<TabItem value="drivers">
These Beyond the [Standard Library](../../engine/stdlib), these functions are provided.

| Function | Description          | Use |
| -------- | -------------------- | --- |
| `Init()`  | Init device. Automatically called on power up. |
| `DVer()`  | This driver version. |
| `Cmd(cmd, arg)`  | Send command to mp3 module. |
| `WResponse(timeout, code, arg)`  | Wait for response. |
| `Stop()`  | Stop playing. |
| `SetVol()`  | Set volume. Min 0, max 30 |
| `IsBusy()`  | Return 1 if busy. |
| `Loop(repeat)`  | Set repeat. |
| `Rst()`  | Reset mp3 module. |
| `PlayFile(file, directory)`  | Play file. Files and directories must be in named in numerics |

:::tip
Example to PlayFile(3, 1) mean play file 003.mp3 in folder name 01. Max mp3 file is 255 in one folder, and max folder is 99.
:::

<details>
 <summary>The Code!</summary>

Modules ship with this script preloaded. Use [Console](../../console) to reload or modify the drivers. Additionally, some languages, such as [Python](../../language/python), include `DUELink.Engine.Record()` for recording scripts directly from the host.

```py
##### Driver Code Starts Here ###

dim b1[10] # buffer to send and read response
_l = 0 # last sent

Alias(respone_to=2000, min_last=200, reset_to=3000, min_vol=0, max_vol=30, code_ok=0x41, code_err=0x40, code_done=0x3D, code_rdy=0x3F, last_sent = _l, busy_pin = 5, message=b9 )

fn Init()
    serCfg(9600, 1024, 0)
    dread(busy_pin, 1) # busy pin, input pull up. Low mean busy
    _l = 0
    
    wait(1500) # power up need 1.5 second for mp3 module initialize internally 
fend

fn Cmd(c, a) 
    # Make sure not too short from last sent
    while ((TickMs() - last_sent) < min_last)
        wait(1)
    wend
    
    message = [ 0x7E, 0xFF, 0x06, c, 0x01, (a >> 8) & 0xFF, a & 0xFF, 0x00, 0x00, 0xEF ]
    
    s = 0
    
    for i = 1 to 7
        s = s - message[i]
    next
    
    message[7] =  (s >> 8) & 0xFF
	message[8] =  s & 0xFF
	
	serwrs(message)
	
	while (serb2r() < 10)
	wend
	b = WResponse(respone_to, code_ok, -1)
	
	last_sent = TickMs()
	
	return b
	
fend

fn WResponse(t, c, a) 
    s = TickMs()
    
    message = [ 0x7E, 0xFF, 06, c, 0, 0, 0, 0, 0, 0xEF ]
    
    i = 0
    b = 0

    while (TickMs() - s < t)
        if (serb2r() > 0)
            b = serrd()
            if (b >= 0) 
                if message[i] = 0 || b = message[i]
                    i = i + 1
                else
                    i = 0
                end
                
                if (i = 10)
                    return 1
                end
                
            end
        end
        Wait(1)
        # check trigger pin no
    wend
    
    return 0
fend

fn Stop() 
    return Cmd(0x16, 0)
fend

fn SetVol(v)
    return Cmd(0x06, v)
fend

fn IsBusy()
    return !dread(busy_pin, 1)
fend

fn Loop(r) # r: repeat
    return Cmd(0x19, !r)
fend

fn Rst()
    if Cmd(0x0C, 0)
        return WResponse(reset_to, code_rdy, -1)
    end
    return 0
fend

fn PlayFile(f, d)
    if (d = 0)
        return Cmd(0x03, f)
    else
        return Cmd(0x0f, (d << 8) | f)
    end
fend

fn DVer()
    return 0.1
fend

Init()


##### User Code Starts Here #####
```
</details>
</TabItem>

<TabItem value="samples">

<Tabs
  values={[
    {label: 'Script', value: 'script'},
    {label: 'Python', value: 'py'},
    {label: 'JavaScript', value: 'js'},

]}>

<TabItem value="script">
 Use [Console](../../console) to modify the default driver by adding this sample.

```py
# Append this code at the bottom of the script, right after the driver.
# You MUST keep the driver code!!

if (Rst()) # reset module
    SetVol(30) # set volume to max
    if (PlayFile(1, 1)) # play file 001.mp3 in folder 01        
        println("File is playing.")
    end
else
    println("Reset failed.")
end

while (IsBusy()) # Busy mean playing
   wait(1)
wend

println("Play ended.")

```

</TabItem>

<TabItem value="py">

```py
from DUELink.DUELinkController import DUELinkController
import time
availablePort = DUELinkController.GetConnectionPort()
duelink = DUELinkController(availablePort)
```

</TabItem>

<TabItem value="js">

```js
//code
```

</TabItem>

</Tabs>

</TabItem>

<TabItem value="projects">Coming soon!</TabItem>

</Tabs>

---

<p
  style={{
    backgroundColor: "lightcyan",
    color: "black",
    padding: "0px 0px 0px 30px",
  }}
>
  ## Ordering Info
</p>

| Description | Part Number | Price  |
| ----------- | ----------- | ------ |
| MP3         | GDL-SOMP3-A | $00.00 |
