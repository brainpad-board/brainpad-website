<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-loader" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Loader | DUELink</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.duelink.com/img/ghielectronics-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://www.duelink.com/img/ghielectronics-social-card.jpg"><meta data-rh="true" property="og:url" content="https://www.duelink.com/docs/loader"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Loader | DUELink"><meta data-rh="true" name="description" content="---"><meta data-rh="true" property="og:description" content="---"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.duelink.com/docs/loader"><link data-rh="true" rel="alternate" href="https://www.duelink.com/docs/loader" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.duelink.com/docs/loader" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.69c46f91.css">
<script src="/assets/js/runtime~main.6843611a.js" defer="defer"></script>
<script src="/assets/js/main.6709f3fb.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/duelinklogo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/duelinklogo.png" alt="DUELink Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/duelinklogo.png" alt="DUELink Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">by GHI Electronics</b></a></div><div class="navbar__items navbar__items--right"><a href="https://www.ghielectronics.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GHI Electronics<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://forums.ghielectronics.com/c/duelink/31" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Forums<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/start/intro">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/catalog/microcomputer/cincobit">Product Catalog</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/system/intro">Supported Systems</a><button aria-label="Expand sidebar category &#x27;Supported Systems&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/language/intro">Hosted Languages</a><button aria-label="Expand sidebar category &#x27;Hosted Languages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/interface/intro">Interfaces</a><button aria-label="Expand sidebar category &#x27;Interfaces&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/engine/intro">Internal Engine</a><button aria-label="Expand sidebar category &#x27;Internal Engine&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/console">Console</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/loader">Loader</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/specs">Specifications</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/downloads">Downloads</a><button aria-label="Expand sidebar category &#x27;Downloads&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/support">Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/legal">Legal &amp; Licensing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/about">About</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Loader</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Loader</h1></header>
<hr>
<p>The STM32C071 chip utilized on all DUELink modules include an ST loader that we utilize for firmware updates using <code>USB DFU</code> standard.</p>
<p>The loaded &quot;firmware&quot; can be the supported DUELink or MicroBlocks. It can also be a custom firmware built using <a href="/docs/language/cpp">C++</a> language page. The <a href="/docs/system/arduino">Arduino</a> IDE can also be used ot build custom firmware; however, the IDE has a built-in DFU upload capability.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="update-options">Update Options<a href="#update-options" class="hash-link" aria-label="Direct link to Update Options" title="Direct link to Update Options">​</a></h2>
<p>Users have two options for firmware updates. We recommend using the <a href="/docs/console">Console</a> as a first choice.</p>
<p><img decoding="async" loading="lazy" src="/img/console-firmware.png" alt="DUELink Console Firmware Menu" class="img_ev3q"></p>
<p>Advance users can also use the <a href="https://www.st.com/en/development-tools/stm32cubeprog.html" target="_blank" rel="noopener noreferrer">STM32CubeProgrammer</a> tool.</p>
<p><img decoding="async" loading="lazy" src="/img/stm-select-usb.png" alt="Select USB" class="img_ev3q"></p>
<p>Either way, the first step is in placing the board in loader mode.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="entering-the-loader">Entering the Loader<a href="#entering-the-loader" class="hash-link" aria-label="Direct link to Entering the Loader" title="Direct link to Entering the Loader">​</a></h2>
<p>Locate the <code>LDR</code> button on your module. On some board, the <code>LDR</code> button is labeled with <code>A</code>.</p>
<p><img decoding="async" loading="lazy" src="/img/ldr-a-buttons.png" alt="Setting Boot mode mode" class="img_ev3q"></p>
<p>Press and <strong>continue to hold</strong> the button while resetting the board. If there is no reset button, then unplug the USB cable first. Now, hold the button while inserting the USB cable. Wait one second after the cable is inserted then release the button.</p>
<p>If neither <code>LDR</code> nor <code>A</code> button is available, then the LDR pads are found on small through-hole pads. Bend and place a small metal paper clip (or a wire) between these 2 pads, and reset/repower the board. You can remove the paper clip after the board is powered up.</p>
<p><img decoding="async" loading="lazy" src="/img/boot-mode.png" alt="Setting Boot mode" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>LDR is the name we use for STM32&#x27;s BOOT0 pin, which is button A in some cases.</p></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="console-update">Console Update<a href="#console-update" class="hash-link" aria-label="Direct link to Console Update" title="Direct link to Console Update">​</a></h2>
<p>Once the device is in the loader mode, the system will detect a USB <code>DFU in FS Mode</code> device.</p>
<p><img decoding="async" loading="lazy" src="/img/device-manager-dfu.png" alt="Verify DFU mode" class="img_ev3q"></p>
<p>From <a href="https://console.duelink.com/" target="_blank" rel="noopener noreferrer">https://console.duelink.com/</a>, click <code>Firmware</code> on the top menu.</p>
<p><img decoding="async" loading="lazy" src="/img/due-firmware.png" alt="DUELink Console Firmware Menu" class="img_ev3q"></p>
<p>Follow the instructions to update the firmware.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="stm32-tools-update">STM32 Tools Update<a href="#stm32-tools-update" class="hash-link" aria-label="Direct link to STM32 Tools Update" title="Direct link to STM32 Tools Update">​</a></h2>
<p>The <a href="https://www.st.com/en/development-tools/stm32cubeprog.html" target="_blank" rel="noopener noreferrer">STM32CubeProgrammer</a> tool is good advanced option.</p>
<p>First, download the desired firmware file from the <a href="/docs/downloads">Downloads</a> page. Connect the module and enter the loader mode, as explained before.</p>
<p>STM32CubeProgrammer will now detect a USB DFU device, select <code>USB</code> from the drop down and click <code>Connect</code>.</p>
<p><img decoding="async" loading="lazy" src="/img/stm-select-usb.png" alt="Select USB" class="img_ev3q"></p>
<p>Click on the side tab then select the file you downloaded from the <a href="/docs/downloads">Download</a> page, then click <code>Start Programming</code></p>
<p><img decoding="async" loading="lazy" src="/img/stm-selectfile-program.png" alt="Select file" class="img_ev3q"></p>
<p>The board now has the desired file loaded!</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="i2c--uart-update">I2C &amp; UART Update<a href="#i2c--uart-update" class="hash-link" aria-label="Direct link to I2C &amp; UART Update" title="Direct link to I2C &amp; UART Update">​</a></h2>
<p>This page focuses on firmware updates using USB DFU mode. We recommend to always use USB DFU when possible; however, using I2C and UART to send firmware updates are other possible options.</p>
<p>When using the <code>U</code> (uplink) connector, the loader can be accessed using USB or UART.</p>
<p>Tools are provided for UAB update but it is up to tey user to implement the necessary UART protocol for firmware update. The &quot;<a href="https://www.st.com/resource/en/application_note/an2606-stm32-microcontroller-system-memory-boot-mode-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">STM32 microcontroller system memory boot mode</a>&quot; application note covers all the needed details.</p>
<p>The same document also covers I2C. The needed I2C may or may not be available on the module being used. For example, custom designs that use <a href="/docs/catalog/microcomputer/stamp">Stamp</a> module can wire the desired I2C pins as they see fit. Use I2C for software update only if there is a very good reason on doing so!</p>
<hr>
<p>=====================</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Everything following this caution is legacy and should not be used!!</p><p>It will be removed soon!</p></div></div>
<p>=====================</p>
<hr>
<p>All modules ship with GHI Electronics&#x27; DUELink Loader. This loader allows for firmware updates over USB, I2C, and UART. It uses XMODEM 1K protocol to send firmware updates, which is a common old standard found in any terminal software, such as TeraTerm. To make things even easier, we have it supported right from within the DUELink Console.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="legacy-loader-commands">Legacy Loader Commands<a href="#legacy-loader-commands" class="hash-link" aria-label="Direct link to Legacy Loader Commands" title="Direct link to Legacy Loader Commands">​</a></h2>
<ul>
<li>V: Return firmware version, device ID and loader version, in this format: GHI Electronics DUELink v01.03:BB01:01.00. If no firmware is found, version will show 00.00 instead.</li>
<li>R: Run the firmware if found, regardless of LDR pin state.</li>
<li>E: Erase firmware.</li>
<li>X: Start XMODEM 1K loading process.</li>
<li>Z: Completely wipeout the chip. This even wipes out the loader itself and changes the LDR pin back to BOOT0 for ST Loader.</li>
<li>N: Return name of the product, &quot;DUELink&quot;.</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>These commands are accessible from a terminal software for manual use. Provided tools such as the <a href="/docs/console">Console</a> will automatically trigger needed commands.</p></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="legacy-firmware-update">Legacy Firmware Update<a href="#legacy-firmware-update" class="hash-link" aria-label="Direct link to Legacy Firmware Update" title="Direct link to Legacy Firmware Update">​</a></h2>
<p>On power up, a DUELink module will start its Loader software. If LDR pin is high, it will hold and wait for commands (LDR has a built in pull down resistor). If it is low, it will check for a valid firmware (the operating system) to execute it.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The loader automatically changes ST-loader BOOT0 pin to LDR on power up. This is needed after system wipeout.</p></div></div>
<p>Firmware updates are necessary to bring the latest features and improvements to your modules. You will rarely ever need to update/remove the Loader but you will need to know how to update the firmware.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>This section assumes you already have the loader. If not, see &quot;Reloading Loader&quot; section.</p></div></div>
<p>First, set the board in loader mode by pressing the LDR/A button, or shorting the LDR pads if there is no button.</p>
<p><img decoding="async" loading="lazy" src="/img/ldr-a-pads.png" alt="LDR, A, pads" class="img_ev3q"></p>
<p>Reset the board while holding LDR high, and the PC will see a Loader device COM port, not DFU. If you see DFU then your device does not have a Loader. See &quot;Reloading Loader&quot; section.</p>
<p><img decoding="async" loading="lazy" src="/img/device-manager-serial.png" alt="Verify Serial Device" class="img_ev3q"></p>
<p>You can also enter the loader using software. From firmware, enter <code>Reset(1)</code> command. This will reset the system in loader mode. Note that if <a href="/docs/interface/usb">USB</a> is used, the firmware will disconnect and the the loader will load with a new COM port.</p>
<p>The <code>Reset(1)</code> command can be entered from console immediate window, or from a terminal software. This can be sent fom any system over <a href="/docs/interface/i2c">I2C</a> or <a href="/docs/interface/uart">Serial UART</a> for example.</p>
<p>You now have 2 options for updating the firmware, using console or using terminal.</p>
<p><strong>Using Console</strong></p>
<p>Click <code>Firmware</code> on the top menu.</p>
<p><img decoding="async" loading="lazy" src="/img/due-firmware.png" alt="DUELink Console Firmware Menu" class="img_ev3q"></p>
<p>Follow the instructions to update the firmware. Note how you are already in loader mode at this point, so you can skip the first few steps.</p>
<p><strong>Using Terminal</strong></p>
<p>Put the board in loader mode by pressing the LDR/A button, or shorting the LDR pads if there is no button.
Open a terminal software, such as <a href="https://teratermproject.github.io/index-en.html" target="_blank" rel="noopener noreferrer">Tera Term</a> and connect the appropriate COM port.</p>
<p><img decoding="async" loading="lazy" src="/img/teraterm-connect-serial.png" alt="Connect the device" class="img_ev3q"></p>
<p>Hit <code>X</code>then <code>Enter</code> and <code>Y</code> to start XMODEM. You will see <code>CCCCC...</code> coming back.</p>
<p><img decoding="async" loading="lazy" src="/img/teraterm-x-y.png" alt="Connect the device" class="img_ev3q"></p>
<p>From the menu, select <code>File-&gt;Transfer-&gt;XMODEM-&gt;Send</code>.</p>
<p><img decoding="async" loading="lazy" src="/img/teraterm-xmodem-send.png" alt="Connect the device" class="img_ev3q"></p>
<p><strong>IMPORTANT:</strong> Select the 1K option and then select the firmware file you want to load. You can get any firmware you need from the <a href="/docs/downloads">Downloads</a> page.</p>
<p><img decoding="async" loading="lazy" src="/img/teraterm-selectfile-1k.png" alt="select the file" class="img_ev3q"></p>
<p>When complete, remove any jumpers wires on LDR, if any, and reset the board. Reconnect the terminal, but to the new COM port reflecting firmware, then enter <code>version()</code> command to see what version is loaded.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="legacy-system-wipeout">Legacy System Wipeout!<a href="#legacy-system-wipeout" class="hash-link" aria-label="Direct link to Legacy System Wipeout!" title="Direct link to Legacy System Wipeout!">​</a></h2>
<p>When desired, it is possible to completely wipe out the chip, including erasing the loader and switching LDR pin back to BOOT0. This is useful when using different software, such as <a href="/docs/system/arduino">Arduino</a>.</p>
<p>This can be done from the loader or from the firmware:</p>
<p><strong>Using Firmware</strong></p>
<p>Use <code>Reset(3)</code> command. That is it! See <a href="/docs/engine/stdlib">Standard Library</a>. You can send this command from <a href="/docs/console">Console</a> in the immediate window. Then send <code>Y</code> to confirm. Or, you can use a terminal software, such as <a href="https://teratermproject.github.io/index-en.html" target="_blank" rel="noopener noreferrer">Tera Term</a>.</p>
<p><strong>Using loader</strong></p>
<p>Enter the loader mode using LDR pads/button (button might be labeled <code>A</code>). Enter the Z command and confirm (Press Y).</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="legacy-reloading-loader--firmware">Legacy Reloading Loader &amp; Firmware<a href="#legacy-reloading-loader--firmware" class="hash-link" aria-label="Direct link to Legacy Reloading Loader &amp; Firmware" title="Direct link to Legacy Reloading Loader &amp; Firmware">​</a></h2>
<p>In case the loader was removed; to run an <a href="/docs/system/arduino">Arduino</a> program for example, you can flash the DUELink loader back onto the device using <a href="https://www.st.com/en/development-tools/stm32cubeprog.html" target="_blank" rel="noopener noreferrer">STM32CubeProgrammer</a> tool. The Loader HEX file is found on the <a href="/docs/downloads">Downloads</a> page. Connect the module to USB, directly if it has USB, or using <a href="/docs/catalog/accessory/usb-hook">USB Hook</a>. Now, push LDR, &quot;A&quot; button or place a paperclip in the loader pads and reset/repower.</p>
<p><img decoding="async" loading="lazy" src="/img/ldr-a-pads.png" alt="LDR, A, pads" class="img_ev3q"></p>
<p>STM32CubeProgrammer will now detect a USB DFU device, select <code>USB</code> from the drop down and click <code>Connect</code>.</p>
<p><img decoding="async" loading="lazy" src="/img/stm-select-usb.png" alt="Select USB" class="img_ev3q"></p>
<p>Click on the side tab then select the <code>Loader</code> file you downloaded from the <a href="/docs/downloads">Download</a> page, then click <code>Start Programming</code></p>
<p><img decoding="async" loading="lazy" src="/img/stm-selectfile-program.png" alt="Select file" class="img_ev3q"></p>
<p>The board now has the GHI Electronics DUELink Loader, ready to accept the firmware. See &quot;Firmware Update&quot; above if you do not know how.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/ghi-electronics/duelink-website/tree/dev/docs/loader.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/console"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Console</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/specs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Specifications</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#update-options" class="table-of-contents__link toc-highlight">Update Options</a></li><li><a href="#entering-the-loader" class="table-of-contents__link toc-highlight">Entering the Loader</a></li><li><a href="#console-update" class="table-of-contents__link toc-highlight">Console Update</a></li><li><a href="#stm32-tools-update" class="table-of-contents__link toc-highlight">STM32 Tools Update</a></li><li><a href="#i2c--uart-update" class="table-of-contents__link toc-highlight">I2C &amp; UART Update</a></li><li><a href="#legacy-loader-commands" class="table-of-contents__link toc-highlight">Legacy Loader Commands</a></li><li><a href="#legacy-firmware-update" class="table-of-contents__link toc-highlight">Legacy Firmware Update</a></li><li><a href="#legacy-system-wipeout" class="table-of-contents__link toc-highlight">Legacy System Wipeout!</a></li><li><a href="#legacy-reloading-loader--firmware" class="table-of-contents__link toc-highlight">Legacy Reloading Loader &amp; Firmware</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 GHI Electronics, LLC</div></div></div></footer></div>
</body>
</html>